-- set envs
set {
	LANG = "ja",
	EDITOR = "vim",
	LESSCHARSET = "UTF-8"
}

-- msys2
nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\scoop\\apps\\msys2\\current\\usr\\bin"
nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\scoop\\apps\\msys2\\current\\mingw64\\bin"

-- prompt
nyagos.prompt = function(this)
	-- path
	local path = nyagos.getwd():gsub("\\", "/")

	-- title
	local title = "NYAGOS - " .. path

	-- prompt
	local prompt = "\n"
	if nyagos.which("starship") then
		prompt = prompt .. nyagos.eval("starship prompt 2> nul") .. " "
	else
		-- git
		local git = " " .. nyagos.eval("git show --format='[%D]' --no-patch 2> nul")
		prompt = prompt .. path .. git .. "\n" .. "❯❯❯ "
	end

	return nyagos.default_prompt(prompt, title)
end

-- ffmpeg
nyagos.alias.hlsdl = function(args)
	nyagos.exec("start ffmpeg -i " .. args[1] .. " -movflags faststart -c copy -bsf:a aac_adtstoasc " .. args[2] .. ".mp4")
end

nyagos.alias.grep = "grep --color=auto"
nyagos.alias.egrep = "egrep --color=auto"
nyagos.alias.fgrep = "fgrep --color=auto"

nyagos.alias.echo = [[~\scoop\apps\msys2\current\usr\bin\echo.exe]]
nyagos.alias.find = [[~\scoop\apps\msys2\current\usr\bin\find.exe]]
nyagos.alias.tree = [[~\scoop\apps\msys2\current\usr\bin\tree.exe]]
nyagos.alias.mkdir = [[~\scoop\apps\msys2\current\usr\bin\mkdir.exe]]

nyagos.alias.vim = nyagos.env.PROGRAMFILES .. [[Vim\vim82\vim.exe]]
nyagos.alias.gvim = nyagos.env.PROGRAMFILES .. [[Vim\vim82\gvim.exe]]
nyagos.alias.vi = "vim"

-- vim:set ft=lua:
