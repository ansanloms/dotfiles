-- set envs
set {
	EDITOR = "vim",
	LESSCHARSET = "UTF-8"
}

-- msys2
nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\scoop\\apps\\msys2\\current\\usr\\bin"
nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\scoop\\apps\\msys2\\current\\mingw64\\bin"

-- rust (cargo)
nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\.cargo\\bin"

-- prompt
nyagos.prompt = function(this)
	-- path
	local path = nyagos.getwd():gsub("\\", "/")

	-- title
	local title = "NYAGOS - " .. path

	-- prompt
	local prompt = "\n"
	if nyagos.which("starship") then
		prompt = prompt .. nyagos.eval("starship prompt 2> nul") .. " "
	else
		-- git
		local git = " " .. nyagos.eval("git show --format='[%D]' --no-patch 2> nul")
		prompt = prompt .. path .. git .. "\n" .. "❯❯❯ "
	end

	return nyagos.default_prompt(prompt, title)
end

-- ffmpeg
nyagos.alias.hlsdl = function(args)
	nyagos.exec("start ffmpeg -i " .. args[1] .. " -movflags faststart -c copy -bsf:a aac_adtstoasc " .. args[2] .. ".mp4")
end

-- docker-machine env
nyagos.alias["docker-env"] = function(args)
	if nyagos.which("docker-machine") then
		local cmd = nyagos.eval("docker-machine env " .. args[1] .. " --shell cmd")
		print(cmd)

		for k, v in string.gmatch(cmd, "SET (.-)=(.-)\n") do
			nyagos.env[k] = v
		end
	end
end

nyagos.alias.grep = "grep --color=auto"
nyagos.alias.egrep = "egrep --color=auto"
nyagos.alias.fgrep = "fgrep --color=auto"

nyagos.alias.find = [[~\scoop\apps\msys2\current\usr\bin\find.exe]]

nyagos.alias.vi = "vim"
nyagos.alias.vim = "vim"

-- vim:set ft=lua:
