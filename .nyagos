-- set envs
set {
	EDITOR = "vim",
	LESSCHARSET = "UTF-8",
	STARSHIP_CONFIG = nyagos.env.homedrive .. nyagos.env.homepath .. "\\.starship"
}

nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\scoop\\apps\\msys2\\current\\usr\\bin"
nyagos.env.path = nyagos.env.path .. ";" .. nyagos.env.homedrive .. nyagos.env.homepath .. "\\scoop\\apps\\msys2\\current\\mingw64\\bin"

-- prompt
nyagos.prompt = function(this)
	-- path
	local path = nyagos.getwd():gsub("\\", "/")

	-- title
	local title = "NYAGOS - " .. path

	-- prompt
	local prompt = "\n"
	if nyagos.which("starship") then
		prompt = prompt .. nyagos.eval("starship prompt 2> nul") .. " "
	else
		-- git
		local git = " " .. nyagos.eval("git show --format='[%D]' --no-patch 2> nul")
		prompt = prompt .. path .. git .. "\n" .. "❯❯❯ "
	end

	return nyagos.default_prompt(prompt, title)
end

-- set alias
nyagos.alias.hlsdl = function(args)
	local cmd = "ffmpeg -i " .. args[1] .. " -movflags faststart -c copy -bsf:a aac_adtstoasc " .. args[2] .. ".mp4"
	print(cmd)
	io.open("start " .. cmd)
end

nyagos.alias.grep = "grep --color=auto"
nyagos.alias.egrep = "egrep --color=auto"
nyagos.alias.fgrep = "fgrep --color=auto"

nyagos.alias.find = [[~\scoop\apps\msys2\current\usr\bin\find.exe]]
nyagos.alias.convert = [[~\scoop\shims\convert.exe]]

nyagos.alias.vi = "gvim"
nyagos.alias.vim = "gvim"

-- vim:set ft=lua:
